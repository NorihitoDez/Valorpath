<div class="container">
  <h2>Registro de usuarios</h2>
  <form [formGroup]="form" (submit)="aceptar()">
    
    <mat-form-field class="example-full-width" *ngIf="edicion">
      <mat-label>Código</mat-label>
      <input matInput placeholder="Id" formControlName="id" readonly />
    </mat-form-field>

    <mat-form-field class="example-full-width">
      <mat-label>DNI</mat-label>
      <input
        matInput
        placeholder="DNI"
        formControlName="dni"
        (keypress)="onlyNumbers($event)"
      />
      <mat-error *ngIf="form.get('dni')?.hasError('required')">
        El DNI es obligatorio.
      </mat-error>
    </mat-form-field>

    <mat-form-field class="example-full-width">
      <mat-label>Nombre</mat-label>
      <input matInput placeholder="Nombre" formControlName="nombre" />
      <mat-error *ngIf="form.get('nombre')?.hasError('required')">
        El nombre es obligatorio.
      </mat-error>
    </mat-form-field>

    <mat-form-field class="example-full-width">
      <mat-label>Apellidos</mat-label>
      <input matInput placeholder="Apellidos" formControlName="apellidos" />
      <mat-error *ngIf="form.get('apellidos')?.hasError('required')">
        Los apellidos son obligatorios.
      </mat-error>
    </mat-form-field>

    <mat-form-field class="example-full-width">
      <mat-label>Correo Electrónico</mat-label>
      <input matInput placeholder="Email" formControlName="correo" />
      <mat-error *ngIf="form.get('correo')?.hasError('required')">
        El email es obligatorio.
      </mat-error>
    </mat-form-field>

    <mat-form-field class="example-full-width">
      <mat-label>Contraseña</mat-label>
      <input
        matInput
        placeholder="Contraseña"
        type="password"
        formControlName="password"
      />
      <mat-error *ngIf="obtenerControlCampo('password')?.errors?.['required']">
        La contraseña es obligatoria.
      </mat-error>
    </mat-form-field>

    <mat-form-field class="example-full-width">
      <mat-label>Cumpleaños</mat-label>
      <input
        matInput
        [matDatepicker]="picker"
        formControlName="cumpleanios"
        placeholder="MM/DD/YYYY"
      />
      <mat-datepicker-toggle
        matIconSuffix
        [for]="picker"
      ></mat-datepicker-toggle>
      <mat-datepicker #picker></mat-datepicker>
      <mat-error *ngIf="form.get('cumpleanios')?.hasError('required')">
        La fecha de cumpleaños es obligatoria.
      </mat-error>
    </mat-form-field>

    <mat-form-field class="example-full-width">
      <mat-label>Dirección</mat-label>
      <textarea
        matInput
        placeholder="Dirección"
        formControlName="direccion"
      ></textarea>
      <mat-error *ngIf="form.get('direccion')?.hasError('required')">
        La dirección es obligatoria.
      </mat-error>
    </mat-form-field>

    <mat-form-field class="example-full-width">
      <mat-label>Habilitar</mat-label>
      <mat-select formControlName="enabled">
        <mat-option *ngFor="let h of habilitado" [value]="h.value">
          {{ h.viewValue }}
        </mat-option>
      </mat-select>
      <mat-error *ngIf="obtenerControlCampo('enabled')?.errors?.['required']">
        Decidir la habilitación de la cuenta es obligatorio.
      </mat-error>
    </mat-form-field>

    <div class="button-container">
      <button mat-raised-button color="primary">Aceptar</button>
      <button
        mat-raised-button
        color="warn"
        routerLink="/usuarios"
        class="cancel"
      >
        Cancelar
      </button>
    </div>

    <p>{{ mensaje }}</p>
  </form>
</div>
